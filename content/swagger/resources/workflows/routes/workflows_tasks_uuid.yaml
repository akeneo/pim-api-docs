patch:
  summary: Update a Workflow Task's Status (Approve, Reject, Complete)
  operationId: "patch_workflows_tasks__uuid_"
  tags:
    - Workflow task
  x-versions:
    - "SaaS"
  x-ee: true
  description: >
    Performs a state transition on a task.<br>
    <ul>
      <li>To approve a 'review' task, set status to <code>approved</code>.</li>
      <li>To complete an 'enrichment' task, set status to <code>completed</code>.</li>
      <li>To reject a 'review' task, set status to <code>rejected</code>, provide <code>send_back_to_step_uuid</code>, and optionally provide <code>rejected_attributes</code> to specify details about rejected attributes.</li>
    </ul>
  parameters:
    - $ref: '#/parameters/uuid'
    - name: body
      in: body
      schema:
        type: object
        required:
          - status
        properties:
          status:
            type: string
            enum: ["completed", "approved", "rejected"]
            description: The new status of the workflow task ("completed", "approved", or "rejected").
          send_back_to_step_uuid:
            type: string
            description: (required only for rejected status) The UUID of the workflow step to which the task should be returned.
          rejected_attributes:
            type: object
            description: (optional, only for rejected status) Optionally provides details about which attributes were rejected. For each attribute name you can specify a comment, the locale, and the scope for the rejection.
            additionalProperties:
              type: array
              items:
                type: object
                properties:
                  comment:
                    type: string
                    description: Comment about the rejection reason for this attribute.
                  locale:
                    type: [string, "null"]
                    description: Locale code, or null if not applicable.
                  scope:
                    type: [string, "null"]
                    description: Scope code, or null if not applicable.
        example:
          [
            {
              status: "completed"
            },
            {
              status: "approved"
            },
            {
              status: "rejected",
              send_back_to_step_uuid: "7108ee60-a1ea-4fe1-baca-b39909e23d24",
              rejected_attributes: {
                name: [
                  {
                    comment: "",
                    locale: null,
                    scope: null
                  }
                ],
                description: [
                  {
                    comment: "Wrong description",
                    locale: "en_US",
                    scope: "ecommerce"
                  },
                  {
                    comment: "",
                    locale: "fr_FR",
                    scope: "mobile"
                  }
                ]
              }
            }
          ]
  responses:
    204:
      $ref: "#/responses/NoContentAfterUpdate"
    400:
      $ref: "#/responses/400Error"
    401:
      $ref: "#/responses/401Error"
    403:
      $ref: "#/responses/403Error"
    415:
      $ref: "#/responses/415Error"
    422:
      $ref: "#/responses/422Error"
